<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Samantha Dantas Medeiros">

    <title>Atividade 1 - Implementação de Funções</title>

    <!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css" rel="stylesheet"> -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poller+One&display=swap" rel="stylesheet"> 
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tenor+Sans&display=swap" rel="stylesheet">
    <style>
        body{
            font-family: 'Tenor Sans', sans-serif;
            color: #fafafa;
            background-color: #000;
        }
        canvas{
            width: 512px;
            height: 512px;
            border: 1px solid gray; 
            image-rendering: pixelated; 
            margin-top:20px; 
            /* position: absolute; 
            left: 16px; */
        }
        a {
            color: #9399FF;
            background-color: #9399FF44;
            padding: 3px;
            border-radius: 3px;
            text-decoration: none;
            transition: 0.8s;
        }
        a:hover {
            color:#9399FF;
        }
        footer {
            letter-spacing: 3px;
            text-align: center;
        }
    </style>
</head>
<body>
    <center>
        <canvas id="canvas" width="128" height="128"></canvas>
    </center>
    <br>
    <footer>{ Samantha Dantas Medeiros ヽ 08.2021 ✦ <a href="https://github.com/sammid37">GitHub</a> }</footer>

    
</body> 
<script> 
    //----------------------- Classe Canvas (https://codepen.io/ICG-UFPB/pen/dyWgQoj)
    class Canvas {
        constructor(canvas_id) {
            this.canvas = document.getElementById(canvas_id);
            this.context = this.canvas.getContext("2d");
            this.clear_color = 'rgba(0,0,0,255)';
        }
        clear() {
            this.context.fillStyle = this.clear_color;
            this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);
        }
        putPixel(x, y, color) {
            //----------------- Pintando em gradiente (teste)
            /* 
            var gradient = context.createLinearGradient(0,0,0,255);
            gradient.addColorStop(0, color[0]);
            gradient.addColorStop(0.5, color[1]);
            gradient.addColorStop(1, color[2]);
            this.context.fillStyle = gradient;
            */

            this.context.fillStyle = 'rgb(' + color[0] + ',' + color[1] + ',' + color[2] + ')';
            this.context.fillRect(x, (this.canvas.height - 1) - y, 1, 1);
        }
    } 
    let color_buffer = new Canvas("canvas");
    color_buffer.clear();

    //----------------------- Implementando funções (https://codepen.io/ICG-UFPB/pen/oNWaQjM)
    function MidPointLineAlgorithm(x0, y0, x1, y1, color_0, color_1) {
        var dx = x1 - x0; // delta x
        var dy = y1 - y0; // delta y
        var d = 2 * dy - dx; // decisão para o 1º pixel
        var inc_L = 2 * dy; // incremento decisão
        var inc_NE = 2 * (dy - dx); // incremento decisão
        var x = x0;
        var y = y0;

        // implementação (exercicio 28/08)
        /*var x_inicio = x0;
        var y_inicio = y0;
        var x_fim = x1;
        var y_fim = y1;*/

        // pinta o pixel de coordenadas (x,y)
        color_buffer.putPixel(x,y,color_0);

        // sempre incrementando o x
        while (x_inicio < x1){
            if (d <= 0){
                d += inc_L; // caminha para a direita (leste)
                x++;

            } else {
                d += inc_NE; // caminha para a diagonal (nordeste)
                x++;
                y++;
            }
            color_buffer.putPixel(x_inicio,y_inicio,color_0);
            color_buffer.putPixel(x_fim,y_fim,color_0);

        }
    }

    function DrawTriangle(x0, y0, x1, y1, x2, y2, color_0, color_1, color_2) {
        // Ascendendo apenas os pontos 
        /*
        color_buffer.putPixel(x0,y0,color_0);
        color_buffer.putPixel(x1,y1,color_1);
        color_buffer.putPixel(x2,y2,color_2);
        */

        // Desenhando linhas chamando a função do "Algoritmo de Ponto Médio"
        MidPointLineAlgorithm(x0, y0, x1, y1, color_0, color_1);
        MidPointLineAlgorithm(x2, y2, x0, y0, color_2, color_0);
        MidPointLineAlgorithm(x1, y1, x2, y2, color_1, color_2);
        
    }

    MidPointLineAlgorithm(25, 30, 100, 80, [255,255,0,255], [255,0,0]);
    DrawTriangle(25, 30, 50, 100, 100, 15, [255,0,0,255], [0,0,255,255], [0,255,0,255]);
 
    /*
        Observações
        p0(25, 30)  rgb(255,0,0,255)
        p1(50, 100) rgb(0,0,255,255)
        p2(100, 15) rgb(0,255,0,255)
    */    

</script> 
</html>